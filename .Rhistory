a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
a
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
# drop.cols <- c('Month', 'Day', 'Hour', '% Year')
# remove <- c('2925','2926','2927','2928','2929')
# drop.cols <- drop.cols [! drop.cols %in% remove]
b
b_filtered <- b %>%
select(-c(Month, Day, Hour, '% Year')) %>%
t() %>%
as.data.frame()
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
a
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
# drop.cols <- c('Month', 'Day', 'Hour', '% Year')
# remove <- c('2925','2926','2927','2928','2929')
# drop.cols <- drop.cols [! drop.cols %in% remove]
b
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
b_filtered <- cbind(rownames(b_filtered), b_filtered)
rownames(b_filtered) <- NULL
colnames(b_filtered) <- c("station_name","values_ozone")
b_filtered$station_name <- as.numeric(b_filtered$station_name)
b_filtered
# c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt')
#
# c
# c_filtered <- c %>%
#   t() %>%
#   as.data.frame()
#
# c_filtered <- cbind(rownames(c_filtered), c_filtered)
# rownames(c_filtered) <- NULL
# colnames(c_filtered) <- c("station_name","values_pm25")
# c_filtered$station_name <- as.numeric(c_filtered$station_name)
# d <- left_join(a, b_filtered)
# e <- left_join(a, c_filtered)
# e
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
a
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
# drop.cols <- c('Month', 'Day', 'Hour', '% Year')
# remove <- c('2925','2926','2927','2928','2929')
# drop.cols <- drop.cols [! drop.cols %in% remove]
b
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`))
# b_filtered <- cbind(rownames(b_filtered), b_filtered)
# rownames(b_filtered) <- NULL
# colnames(b_filtered) <- c("station_name","values_ozone")
#
# b_filtered$station_name <- as.numeric(b_filtered$station_name)
#
#
# b_filtered
# c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt')
#
# c
# c_filtered <- c %>%
#   t() %>%
#   as.data.frame()
#
# c_filtered <- cbind(rownames(c_filtered), c_filtered)
# rownames(c_filtered) <- NULL
# colnames(c_filtered) <- c("station_name","values_pm25")
# c_filtered$station_name <- as.numeric(c_filtered$station_name)
# d <- left_join(a, b_filtered)
# e <- left_join(a, c_filtered)
# e
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
a
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
# drop.cols <- c('Month', 'Day', 'Hour', '% Year')
# remove <- c('2925','2926','2927','2928','2929')
# drop.cols <- drop.cols [! drop.cols %in% remove]
b
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`))
b_filtered
# b_filtered <- cbind(rownames(b_filtered), b_filtered)
# rownames(b_filtered) <- NULL
# colnames(b_filtered) <- c("station_name","values_ozone")
#
# b_filtered$station_name <- as.numeric(b_filtered$station_name)
#
#
# b_filtered
# c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt')
#
# c
# c_filtered <- c %>%
#   t() %>%
#   as.data.frame()
#
# c_filtered <- cbind(rownames(c_filtered), c_filtered)
# rownames(c_filtered) <- NULL
# colnames(c_filtered) <- c("station_name","values_pm25")
# c_filtered$station_name <- as.numeric(c_filtered$station_name)
# d <- left_join(a, b_filtered)
# e <- left_join(a, c_filtered)
# e
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
a
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
# drop.cols <- c('Month', 'Day', 'Hour', '% Year')
# remove <- c('2925','2926','2927','2928','2929')
# drop.cols <- drop.cols [! drop.cols %in% remove]
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
b_filtered <- cbind(rownames(b_filtered), b_filtered)
rownames(b_filtered) <- NULL
colnames(b_filtered) <- c("station_name","values_ozone")
b_filtered$station_name <- as.numeric(b_filtered$station_name)
b_filtered
# c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt')
#
# c
# c_filtered <- c %>%
#   t() %>%
#   as.data.frame()
#
# c_filtered <- cbind(rownames(c_filtered), c_filtered)
# rownames(c_filtered) <- NULL
# colnames(c_filtered) <- c("station_name","values_pm25")
# c_filtered$station_name <- as.numeric(c_filtered$station_name)
# d <- left_join(a, b_filtered)
# e <- left_join(a, c_filtered)
# e
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
a
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
# drop.cols <- c('Month', 'Day', 'Hour', '% Year')
# remove <- c('2925','2926','2927','2928','2929')
# drop.cols <- drop.cols [! drop.cols %in% remove]
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
b_filtered <- cbind(rownames(b_filtered), b_filtered)
rownames(b_filtered) <- NULL
colnames(b_filtered) <- c("station_name","values_ozone")
b_filtered$station_name <- as.numeric(b_filtered$station_name)
c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt')
c
# c_filtered <- c %>%
#  t() %>%
#  as.data.frame()
#
#  c_filtered <- cbind(rownames(c_filtered), c_filtered)
#  rownames(c_filtered) <- NULL
#  colnames(c_filtered) <- c("station_name","values_pm25")
#  c_filtered$station_name <- as.numeric(c_filtered$station_name)
# d <- left_join(a, b_filtered)
# e <- left_join(a, c_filtered)
# e
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
a
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
# drop.cols <- c('Month', 'Day', 'Hour', '% Year')
# remove <- c('2925','2926','2927','2928','2929')
# drop.cols <- drop.cols [! drop.cols %in% remove]
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
b_filtered <- cbind(rownames(b_filtered), b_filtered)
rownames(b_filtered) <- NULL
colnames(b_filtered) <- c("station_name","values_ozone")
b_filtered$station_name <- as.numeric(b_filtered$station_name)
c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt') %>%
filter(Month==4, Day==5, Hour==3)
c_filtered <- c %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
c_filtered
#  c_filtered <- cbind(rownames(c_filtered), c_filtered)
#  rownames(c_filtered) <- NULL
#  colnames(c_filtered) <- c("station_name","values_pm25")
#  c_filtered$station_name <- as.numeric(c_filtered$station_name)
# d <- left_join(a, b_filtered)
# e <- left_join(a, c_filtered)
# e
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
b_filtered <- cbind(rownames(b_filtered), b_filtered)
rownames(b_filtered) <- NULL
colnames(b_filtered) <- c("station_name","values_ozone")
b_filtered$station_name <- as.numeric(b_filtered$station_name)
c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt') %>%
filter(Month==4, Day==5, Hour==3)
c_filtered <- c %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
c_filtered <- cbind(rownames(c_filtered), c_filtered)
rownames(c_filtered) <- NULL
colnames(c_filtered) <- c("station_name","values_no2")
c_filtered$station_name <- as.numeric(c_filtered$station_name)
d <- left_join(a, b_filtered)
e <- left_join(a, c_filtered)
e
library(GISTools)
library(rgdal)
writeOGR(obj=d, dsn="tempdir", layer="values", driver="ESRI Shapefile") # this is in geographical projection
library(GISTools)
library(rgdal)
writeOGR(obj=d, dsn="tempdir", layer="values", driver="ESRI Shapefile") # this is in geographical projection
write.csv(d, file = "MyData.csv")
write.csv(d, file = "ozone.csv")
write.csv(e, file = "no2.csv")
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b_filtered
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
write.csv(d, file = "ozone.csv")
write.csv(e, file = "no2.csv")
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
b_filtered <- b %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
b_filtered <- b %>%
t() %>%
as.data.frame()
b_filtered <- cbind(rownames(b_filtered), b_filtered)
rownames(b_filtered) <- NULL
colnames(b_filtered) <- c("station_name","values_ozone")
b_filtered$station_name <- as.numeric(b_filtered$station_name)
b_filtered$values_ozone <- as.numeric(b_filtered$values_ozone)
c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt') %>%
filter(Month==4, Day==5, Hour==3)
c_filtered <- c %>%
select(-c(Month, Day, Hour, `% Year`)) %>%
t() %>%
as.data.frame()
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')
colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"
a <- filter(a, !grepl('Japan', name)) %>%
filter(!grepl('Korea',name)) %>%
filter(!grepl('Thailand',name)) %>%
filter(!grepl('Mongolia',name)) %>%
filter(!grepl('Taiwan',name))%>%
filter(!grepl('Macau',name))
b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
filter(Month==4, Day==5, Hour==3)
b
b_filtered <- b %>%
t() %>%
as.data.frame()
b_filtered <- cbind(rownames(b_filtered), b_filtered)
rownames(b_filtered) <- NULL
colnames(b_filtered) <- c("station_name","values_ozone")
b_filtered$station_name <- as.numeric(b_filtered$station_name)
b_filtered$values_ozone <- as.numeric(b_filtered$values_ozone)
c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt') %>%
filter(Month==4, Day==5, Hour==3)
c_filtered <- c %>%
t() %>%
as.data.frame()
c_filtered <- cbind(rownames(c_filtered), c_filtered)
rownames(c_filtered) <- NULL
colnames(c_filtered) <- c("station_name","values_no2")
c_filtered$station_name <- as.numeric(c_filtered$station_name)
c_filtered$values_no2 <- as.numeric(c_filtered$values_no2)
c_filtered
d <- left_join(a, b_filtered)
e <- left_join(a, c_filtered)
write.csv(d, file = "ozone.csv")
write.csv(e, file = "no2.csv")
