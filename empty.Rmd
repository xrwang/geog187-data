---
title: "air qual data"
author: "Xiaowei Wang"
output: github_document
---

```{r}
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')

colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"

a <- filter(a, !grepl('Japan', name)) %>%
   filter(!grepl('Korea',name)) %>%
   filter(!grepl('Thailand',name)) %>%
   filter(!grepl('Mongolia',name)) %>%
   filter(!grepl('Taiwan',name))%>%
  filter(!grepl('Macau',name))

b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
  filter(Month==4, Day==5, Hour==3)


b_filtered <- b %>%
  select(-c(Month, Day, Hour, `% Year`)) %>%
  t() %>%
  as.data.frame() 


 b_filtered <- cbind(rownames(b_filtered), b_filtered)
 rownames(b_filtered) <- NULL
 colnames(b_filtered) <- c("station_name","values_ozone")

 b_filtered$station_name <- as.numeric(b_filtered$station_name)

c <- readr::read_tsv('air-quality-data/China_Station_NO2.txt') %>%
  filter(Month==4, Day==5, Hour==3)

c_filtered <- c %>%
  select(-c(Month, Day, Hour, `% Year`)) %>%
  t() %>%
  as.data.frame() 

 c_filtered <- cbind(rownames(c_filtered), c_filtered)
 rownames(c_filtered) <- NULL
 colnames(c_filtered) <- c("station_name","values_no2")
 c_filtered$station_name <- as.numeric(c_filtered$station_name)

d <- left_join(a, b_filtered)

e <- left_join(a, c_filtered)
e
```