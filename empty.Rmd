---
title: "air qual data"
author: "Xiaowei Wang"
output: github_document
---

```{r}
library(dplyr)
library(tidyr)
a <- readr::read_tsv('air-quality-data/China_Station_Metadata.txt')

colnames(a)[1] <- "station_name"
colnames(a)[2] <- "latitude"
colnames(a)[3] <- "longitude"
colnames(a)[4] <- "name"

a <- filter(a, !grepl('Japan', name)) %>%
   filter(!grepl('Korea',name)) %>%
   filter(!grepl('Thailand',name)) %>%
   filter(!grepl('Mongolia',name)) %>%
   filter(!grepl('Taiwan',name)) 


factor(a$station_name)


b <- readr::read_tsv('air-quality-data/China_Station_O3.txt') %>%
  filter(Month==4, Day==5, Hour==3)

# drop.cols <- c(as.character(c(seq(1264, 2929))), 'Month', 'Day', 'Hour', '% Year')
# remove <- c('2925','2926','2927','2928','2929')
# drop.cols <- drop.cols [! drop.cols %in% remove]

#b

b_filtered <- b %>% 
  select(-one_of(drop.cols)) %>%
  mutate(., a=NA) %>%
  t() %>%
  as.data.frame()


b_filtered <- cbind(rownames(b_filtered), b_filtered)
rownames(b_filtered) <- NULL
colnames(b_filtered) <- c("station_name","values")


d <- left_join(a, b_filtered)

d
```